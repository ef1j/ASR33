#!/bin/bash

# display a big emoji

# 0.1" character pitch horizontally
# 0.16" vertically
# default to small
width=32
height=20
if [[ "$1" == "-big" ]]; then
    # large
    width=72
    height=45
    shift
fi

tmps=$(mktemp -t XXXXXX.svg)
tmpp=$(mktemp -t XXXXXX.png)
function cleanup() {
    rm $tmps
    rm $tmpp
}
trap cleanup EXIT

url=$(emojiurl "$1")
if [[ $? == 0 ]]; then
    # fetch the SVG and convert to a PNG
    wget -q -O "$tmps" "$url"
    rsvg-convert -w 480 "$tmps" > "$tmpp"
    # cp "$tmpp" emoji.png

    # convert to ascii
    /home/asr33/asr33/asciiart/code/image2.py --width $width "$tmpp" --gamma 2.0 --output -
fi
